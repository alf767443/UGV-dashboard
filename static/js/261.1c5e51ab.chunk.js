"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[261],{23261:function(e,t,n){n.d(t,{Z:function(){return Q}});var r=n(1413),a=n(15671),i=n(43144),o=n(60136),s=n(27277),c=n(47313),l=n(78315),u=n(95436),f=n(96543),d=n(89755),h=n(91372),m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},g=(0,c.forwardRef)((function(e,t){var n=e.chartRef,r=e.style,a=void 0===r?{height:"inherit"}:r,i=e.className,o=e.loading,s=e.loadingTemplate,g=e.errorTemplate,p=m(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),v=(0,u.Z)(l.Bullet,p),y=v.chart,k=v.container;return(0,c.useEffect)((function(){(0,f.J)(n,y.current)}),[y.current]),(0,c.useImperativeHandle)(t,(function(){return{getChart:function(){return y.current}}})),c.createElement(d.Z,{errorTemplate:g},o&&c.createElement(h.Z,{loadingTemplate:s,theme:e.theme}),c.createElement("div",{className:i,style:a,ref:k}))})),p=g,v=n(8515),y=n(46417),k=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.current",right:"$right.current"}},{$sort:{_id:-1}},{$limit:1}]}),Z=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.canUpdate()}),1e3)},r.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},r.data=function(){return console.log(r.state.data.left),[{title:"Left current",ranges:[2,3,3.5],measures:[0],value:Math.round(100*r.state.data.left)/100},{title:"Right current",ranges:[2,3,3.5],measures:[0],value:Math.round(100*r.state.data.right)/100}]},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var e=this;fetch((0,v.H)(),(0,v.w)(k)).then((function(e){return e.json()})).then((function(t){e.setState({data:t[0]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return(0,y.jsx)(p,(0,r.Z)((0,r.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),S=n(4942),F=n(63366),b=n(87462),w=n(83061),x=n(27958),j=n(94989),I=n(92447),O=(0,n(82591).ZP)(),P=n(22453),L=n(93433),M=n(65111),N=["sx"];function R(e){var t,n=e.sx,r=function(e){var t,n,r={systemProps:{},otherProps:{}},a=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:M.Z;return Object.keys(e).forEach((function(t){a[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r}((0,F.Z)(e,N)),a=r.systemProps,i=r.otherProps;return t=Array.isArray(n)?[a].concat((0,L.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,x.P)(e)?(0,b.Z)({},a,e):a}:(0,b.Z)({},a,n),(0,b.Z)({},i,{sx:t})}var $=n(51048),_=n(66396),C=n(48255),D=["component","direction","spacing","divider","children","className"],J=(0,$.Z)(),T=O("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,t){return t.root}});function U(e){return(0,P.Z)({props:e,name:"MuiStack",defaultTheme:J})}function E(e,t){var n=c.Children.toArray(e).filter(Boolean);return n.reduce((function(e,r,a){return e.push(r),a<n.length-1&&e.push(c.cloneElement(t,{key:"separator-".concat(a)})),e}),[])}var A=function(e){var t=e.ownerState,n=e.theme,r=(0,b.Z)({display:"flex",flexDirection:"column"},(0,_.k9)({theme:n},(0,_.P$)({values:t.direction,breakpoints:n.breakpoints.values}),(function(e){return{flexDirection:e}})));if(t.spacing){var a=(0,C.hB)(n),i=Object.keys(n.breakpoints.values).reduce((function(e,n){return("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e}),{}),o=(0,_.P$)({values:t.direction,base:i}),s=(0,_.P$)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach((function(e,t,n){if(!o[e]){var r=t>0?o[n[t-1]]:"column";o[e]=r}}));r=(0,x.Z)(r,(0,_.k9)({theme:n},s,(function(e,n){return{"& > :not(style) + :not(style)":(0,S.Z)({margin:0},"margin".concat((r=n?o[n]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[r])),(0,C.NA)(a,e))};var r})))}return r=(0,_.dt)(n.breakpoints,r)};var B=n(48114),W=n(8362),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,n=void 0===t?T:t,r=e.useThemeProps,a=void 0===r?U:r,i=e.componentName,o=void 0===i?"MuiStack":i,s=function(){return(0,j.Z)({root:["root"]},(function(e){return(0,I.Z)(o,e)}),{})},l=n(A),u=c.forwardRef((function(e,t){var n=R(a(e)),r=n.component,i=void 0===r?"div":r,o=n.direction,c=void 0===o?"column":o,u=n.spacing,f=void 0===u?0:u,d=n.divider,h=n.children,m=n.className,g=(0,F.Z)(n,D),p={direction:c,spacing:f},v=s();return(0,y.jsx)(l,(0,b.Z)({as:i,ownerState:p,ref:t,className:(0,w.Z)(v.root,m)},g,{children:d?E(h,d):h}))}));return u}({componentName:"JoyStack",createStyledComponent:(0,B.Z)("div",{name:"JoyStack",slot:"Root",overridesResolver:function(e,t){return t.root}}),useThemeProps:function(e){return(0,W.Z)({props:e,name:"JoyStack"})}}),z=H,G=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.PWM",right:"$right.PWM"}},{$sort:{_id:-1}},{$limit:1}]}),V=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.canUpdate()}),1e3)},r.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},r.data=function(){return console.log(r.state.data.left),[{title:"Left PWM",ranges:[65,85,100],measures:[0],value:Math.round(100*r.state.data.left)/100},{title:"Right PWM",ranges:[65,85,100],measures:[0],value:Math.round(100*r.state.data.right)/100}]},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var e=this;fetch((0,v.H)(),(0,v.w)(G)).then((function(e){return e.json()})).then((function(t){e.setState({data:t[0]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return(0,y.jsx)(p,(0,r.Z)((0,r.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),q=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.rrate",right:"$right.rrate"}},{$sort:{_id:-1}},{$limit:1}]}),K=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.canUpdate()}),1e3)},r.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},r.data=function(){return console.log(r.state.data.left),[{title:"Left speed",ranges:[65,85,100],measures:[0],value:Math.round(100*r.state.data.left)/100},{title:"Right speed",ranges:[65,85,100],measures:[0],value:Math.round(100*r.state.data.right)/100}]},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var e=this;fetch((0,v.H)(),(0,v.w)(q)).then((function(e){return e.json()})).then((function(t){e.setState({data:t[0]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return(0,y.jsx)(p,(0,r.Z)((0,r.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),Q=function(){return(0,y.jsxs)(z,{direction:"column",alignItems:"center",spacing:0,children:[(0,y.jsx)(Z,{}),(0,y.jsx)(V,{}),(0,y.jsx)(K,{})]})}}}]);