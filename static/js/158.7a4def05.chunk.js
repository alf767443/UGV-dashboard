"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[158],{55412:function(t,e,n){n.d(e,{Z:function(){return x}});var i=n(1413),a=n(93433),r=n(15671),s=n(43144),o=n(60136),c=n(27277),l=n(47313),u=n(82597),d=n(8515),f=n(8200),h=n(44090),m=n(16157),g=n(62463),p=n(42669),Z=n(46417),v=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"left.PWM":1,"right.PWM":1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",PWM:{$avg:"$"+t+".PWM"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},x=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={padding:"auto",xField:"_id",yField:"PWM",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor PWM [%]"}},tooltip:{formatter:function(t){return null!=t.PWM?{name:"PWM",value:t.PWM.toFixed(1)+" %"}:{}}},smooth:!0},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,s.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,d.H)(),(0,d.w)(v("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).catch((function(t){console.log(t)})),fetch((0,d.H)(),(0,d.w)(v("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).catch((function(t){console.log(t)})),this.setState({data:[].concat((0,a.Z)(this.state.left),(0,a.Z)(this.state.right))})}},{key:"render",value:function(){return(0,Z.jsx)(f.Z,{sx:h.Z.maincard.sx,content:h.Z.maincard.content,children:(0,Z.jsx)(m.Z,{sx:h.Z.box.sx,children:(0,Z.jsxs)(g.Z,{spacing:h.Z.stack.spacing,direction:h.Z.stack.direction,alignItems:h.Z.stack.alignItems,children:[(0,Z.jsx)(p.Z,{variant:h.Z.typography.title.variant,color:h.Z.typography.title.color,children:"Battery PWM by time"}),(0,Z.jsx)(u.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},h.Z.graph.medium))]})})})}}]),n}(l.Component)},74256:function(t,e,n){n.d(e,{Z:function(){return x}});var i=n(1413),a=n(93433),r=n(15671),s=n(43144),o=n(60136),c=n(27277),l=n(47313),u=n(82597),d=n(8515),f=n(8200),h=n(44090),m=n(16157),g=n(62463),p=n(42669),Z=n(46417),v=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"left.current":1,"right.current":1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$"+t+".current"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},x=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={padding:"auto",xField:"_id",yField:"current",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor current [A]"}},tooltip:{formatter:function(t){return null!=t.current?{name:"Current",value:t.current.toFixed(1)+" A"}:{}}},smooth:!0},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,s.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,d.H)(),(0,d.w)(v("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).catch((function(t){console.log(t)})),fetch((0,d.H)(),(0,d.w)(v("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).catch((function(t){console.log(t)})),this.setState({data:[].concat((0,a.Z)(this.state.left),(0,a.Z)(this.state.right))})}},{key:"render",value:function(){return(0,Z.jsx)(f.Z,{sx:h.Z.maincard.sx,content:h.Z.maincard.content,children:(0,Z.jsx)(m.Z,{sx:h.Z.box.sx,children:(0,Z.jsxs)(g.Z,{spacing:h.Z.stack.spacing,direction:h.Z.stack.direction,alignItems:h.Z.stack.alignItems,children:[(0,Z.jsx)(p.Z,{variant:h.Z.typography.title.variant,color:h.Z.typography.title.color,children:"Battery current by time"}),(0,Z.jsx)(u.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},h.Z.graph.medium))]})})})}}]),n}(l.Component)},6781:function(t,e,n){n.d(e,{Z:function(){return F}});var i=n(1413),a=n(15671),r=n(43144),s=n(60136),o=n(27277),c=n(47313),l=n(20061),u=n(8515),d=n(44090),f=n(62463),h=n(42669),m=n(46417),g=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.current",right:"$right.current"}},{$sort:{_id:-1}},{$limit:1}]}),p=function(t){(0,s.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"Current",xField:"title",color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[2,3,3.5],measures:[0],Current:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[2,3,3.5],measures:[0],Current:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(g)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(f.Z,{children:[(0,m.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},d.Z.bullet.dual)),(0,m.jsx)(h.Z,(0,i.Z)((0,i.Z)({},d.Z.typography.subtitle),{},{children:"Current"}))]})}}]),n}(c.Component),Z=n(16157),v=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.PWM",right:"$right.PWM"}},{$sort:{_id:-1}},{$limit:1}]}),x=function(t){(0,s.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(v)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(f.Z,{children:[(0,m.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},d.Z.bullet.dual)),(0,m.jsx)(h.Z,(0,i.Z)((0,i.Z)({},d.Z.typography.subtitle),{},{children:"PWM"}))]})}}]),n}(c.Component),y=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.rrate",right:"$right.rrate"}},{$sort:{_id:-1}},{$limit:1}]}),k=function(t){(0,s.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(y)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(f.Z,{children:[(0,m.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},d.Z.bullet.dual)),(0,m.jsx)(h.Z,(0,i.Z)((0,i.Z)({},d.Z.typography.subtitle),{},{children:"Rot. rate"}))]})}}]),n}(c.Component),S=n(8200),F=function(){return(0,m.jsx)(S.Z,{sx:d.Z.maincard.sx,content:d.Z.maincard.content,children:(0,m.jsx)(Z.Z,{sx:d.Z.box.sx,children:(0,m.jsxs)(f.Z,{spacing:d.Z.stack.spacing,direction:d.Z.stack.direction,alignItems:d.Z.stack.alignItems,children:[(0,m.jsx)(h.Z,{variant:d.Z.typography.title.variant,color:d.Z.typography.title.color,children:"Motor actual states"}),(0,m.jsxs)(f.Z,{direction:"row",alignItems:"center",spacing:0,children:[(0,m.jsx)(p,{}),(0,m.jsx)(x,{}),(0,m.jsx)(k,{})]})]})})})}},44090:function(t,e){e.Z={graph:{big:{},medium:{width:400,height:200},small:{}},stack:{direction:"column",alignItems:"center",spacing:1},typography:{title:{align:"center",variant:"h5",color:"textSecondary"},subtitle:{align:"center",variant:"h6",color:"textSecondary"}},box:{sx:{p:1,pb:1}},maincard:{sx:{mt:1,mr:1,ml:1,mb:1},content:!1},bullet:{simple:{size:{range:30,measure:0,target:30},height:50,width:350,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0}},dual:{size:{range:30,measure:0,target:30},height:200,width:90,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},layout:"vertical"}}}},82597:function(t,e,n){var i=n(47313),a=n(78315),r=n(95436),s=n(96543),o=n(89755),c=n(91372),l=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n},u=(0,i.forwardRef)((function(t,e){var n=t.chartRef,u=t.style,d=void 0===u?{height:"inherit"}:u,f=t.className,h=t.loading,m=t.loadingTemplate,g=t.errorTemplate,p=l(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Z=(0,r.Z)(a.Line,p),v=Z.chart,x=Z.container;return(0,i.useEffect)((function(){(0,s.J)(n,v.current)}),[v.current]),(0,i.useImperativeHandle)(e,(function(){return{getChart:function(){return v.current}}})),i.createElement(o.Z,{errorTemplate:g},h&&i.createElement(c.Z,{loadingTemplate:m,theme:t.theme}),i.createElement("div",{className:f,style:d,ref:x}))}));e.Z=u}}]);