"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[62],{5391:function(t,e){e.Z={typography:{align:"left",variant:"h3",color:"textSecondary",xs:12,sm:12,md:12,lg:12,xl:12},stack:{spacing:2,xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:0}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:0,ml:0,mb:0,gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:6,xl:6,spacing:0}}}},93062:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var i=n(1413),a=n(82937),r=n(15671),s=n(43144),o=n(60136),c=n(27277),l=n(47313),d=n(16157),u=n(62463),m=n(42669),Z=n(8200),h=n(26899),g=n(8515),p=n(46417),f=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{_id:0}},{$sort:{dateTime:-1}},{$limit:1e3}]}),x=[{title:"Time",dataIndex:"dateTime",key:"dateTime",sorter:{compare:function(t,e){return t.dateTime-e.dateTime},multiple:1},defaultSortOrder:"descend"},{title:"Percentage",dataIndex:["percentage"],key:"percentage"},{title:"Voltage",dataIndex:["voltage"],key:"voltage"},{title:"Current",dataIndex:["voltage"],key:"current"},{title:"Power",dataIndex:["power"],key:"power"}],y=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList()},i.state={data:[],ticks:-1},i}return(0,s.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,g.H)(),(0,g.w)(f)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,p.jsx)(h.Z,{columns:x,dataSource:this.state.data,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange,sx:this.props.sx})}}]),n}(l.Component),v=n(40040),j=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){return(0,p.jsx)(Z.Z,{sx:v.Z,content:!1,children:(0,p.jsx)(d.Z,{sx:{p:3,pb:0},children:(0,p.jsxs)(u.Z,{spacing:2,children:[(0,p.jsx)(m.Z,{variant:"h3",color:"textSecondary",children:"Battery data"}),(0,p.jsx)(y,{})]})})})}}]),n}(l.Component),k=n(56448),$=n(2122),w=n(83007),C=n(90722),S=n(44090),I=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:1,current:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$current"},voltage:{$avg:"$voltage"}}},{$set:{power:{$multiply:["$current","$voltage"]}}},{$project:{_id:1,power:1}},{$sort:{_id:-1}},{$limit:100}]}),b=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={xField:"_id",yField:"power",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery power [W]"}},tooltip:{formatter:function(t){return null!=t.power?{name:"Power",value:t.power.toFixed(1)+" W"}:{}}}},i.state={data:[],ticks:-1},i}return(0,s.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,g.H)(),(0,g.w)(I)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,p.jsx)(Z.Z,(0,i.Z)((0,i.Z)({},S.Z.maincard),{},{children:(0,p.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},S.Z.stack),{},{children:[(0,p.jsx)(m.Z,(0,i.Z)((0,i.Z)({},S.Z.typography.title),{},{children:"Battery power by time"})),(0,p.jsx)(C.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),S.Z.plot),{},{data:this.state.data}))]}))}))}}]),n}(l.Component),T=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",voltage:{$avg:"$voltage"}}},{$sort:{_id:-1}},{$limit:100}]}),_=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={xField:"_id",yField:"voltage",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery voltage [V]"}},tooltip:{formatter:function(t){return null!=t.voltage?{name:"Voltage",value:t.voltage.toFixed(1)+" V"}:{}}}},i.state={data:[],ticks:-1},i}return(0,s.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,g.H)(),(0,g.w)(T)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,p.jsx)(Z.Z,(0,i.Z)((0,i.Z)({},S.Z.maincard),{},{children:(0,p.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},S.Z.stack),{},{children:[(0,p.jsx)(m.Z,(0,i.Z)((0,i.Z)({},S.Z.typography.title),{},{children:"Battery voltage by time"})),(0,p.jsx)(C.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),S.Z.plot),{},{data:this.state.data}))]}))}))}}]),n}(l.Component),D=n(47103),P=n(5391),L=function(t){(0,o.Z)(n,t);var e=(0,c.Z)(n);function n(t){var s;return(0,r.Z)(this,n),(s=e.call(this,t)).hadleChange=function(t,e){s.setState({page:e}),s.componentDidMount()},s.componentDidMount=function(){s.graphs()},s.graphs=function(){switch(s.state.page){case 1:return(0,p.jsxs)(a.ZP,(0,i.Z)((0,i.Z)({container:!0},P.Z.grid.main),{},{children:[(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},P.Z.grid.item),{},{children:(0,p.jsx)($.Z,{})})),(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},P.Z.grid.item),{},{children:(0,p.jsx)(w.Z,{})}))]}));case 2:return(0,p.jsxs)(a.ZP,(0,i.Z)((0,i.Z)({container:!0},P.Z.grid.main),{},{children:[(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},P.Z.grid.item),{},{children:(0,p.jsx)(b,{})})),(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},P.Z.grid.item),{},{children:(0,p.jsx)(_,{})}))]}));case 3:return(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({container:!0},P.Z.grid.main),{},{children:(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},P.Z.grid.item),{},{children:(0,p.jsx)(D.Z,{})}))}))}},s.state={page:1},s}return(0,s.Z)(n,[{key:"render",value:function(){return(0,p.jsx)(Z.Z,(0,i.Z)((0,i.Z)({},P.Z.box),{},{children:(0,p.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},P.Z.stack),{},{children:[(0,p.jsx)(m.Z,(0,i.Z)((0,i.Z)({},P.Z.typography),{},{children:"Battery plots"})),this.graphs(),(0,p.jsx)(k.Z,{count:3,defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]}))}))}}]),n}(l.Component),M=n(88461),B=function(){return(0,p.jsxs)(a.ZP,(0,i.Z)((0,i.Z)({container:!0},M.Z.grid.main),{},{children:[(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},M.Z.grid.item),{},{children:(0,p.jsx)(L,{})})),(0,p.jsx)(a.ZP,(0,i.Z)((0,i.Z)({item:!0},M.Z.grid.item),{},{children:(0,p.jsx)(j,{})}))]}))}},88461:function(t,e){e.Z={stack:{spacing:0,direction:"column",alignItems:"center",xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:2},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:12,xl:12,spacing:0,sx:{mt:0,mr:1,ml:1,mb:0}}}}},40040:function(t,e){e.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}}}]);