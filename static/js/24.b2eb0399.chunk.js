"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[24],{44090:function(t,e){e.Z={graph:{big:{},medium:{width:400,height:200},small:{}},stack:{direction:"column",alignItems:"center",spacing:1},typography:{title:{align:"center",variant:"h5",color:"textSecondary"},subtitle:{align:"center",variant:"h6",color:"textSecondary"}},box:{sx:{p:1,pb:1}},maincard:{sx:{mt:1,mr:1,ml:1,mb:1},content:!1},bullet:{simple:{size:{range:30,measure:0,target:30},height:50,width:350,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0}},dual:{size:{range:30,measure:0,target:30},height:200,width:90,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},layout:"vertical"}}}},6024:function(t,e,n){n.r(e),n.d(e,{default:function(){return D}});var a=n(62463),i=n(15671),o=n(43144),s=n(60136),c=n(27277),r=n(47313),l=n(16157),u=n(42669),d=n(56448),h=n(8200),y=n(40040),f=n(55159),x=n(6750),g=n(1413),$=n(93433),p=n(36209),m=n(9659),Z=n(8515),v=n(44090),C=n(46417),T=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionAMCL_Data",pipeline:[{$project:{dateTime:1,x:1,y:1,yaw:"$orient.yaw"}},{$sort:{dateTime:-1}},{$limit:1}]}),w=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionOdom_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},x:{$toInt:"$x"},y:{$toInt:"$y"},orient:1}},{$addFields:{xy:{$concat:[{$toString:["$x"]},":",{$toString:["$y"]}]}}},{$unionWith:{coll:"RemoteUnitConection_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},Connect:{$toInt:["$Connect"]},RTT:1}}]}},{$group:{_id:"$dateTime",x:{$avg:"$x"},y:{$avg:"$y"},yaw:{$avg:"$orient.yaw"},Connect:{$avg:"$Connect"},RTT:{$avg:"$RTT"},xy:{$first:"$xy"}}},{$group:{_id:"$dateTime",x:{$avg:"$x"},y:{$avg:"$y"},yaw:{$avg:"$orient.yaw"},Connect:{$avg:"$Connect"},RTT:{$avg:"$RTT"},xy:{$first:"$xy"}}},{$match:{Connect:{$gt:0}}},{$set:{RTT:{$round:["$RTT",2]}}}]}),F=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.refreshMap(),a.refreshPos(),a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={type:"density",xField:"x",yField:"y",xAxis:!1,yAxis:!1,colorField:"RTT",limitInPlot:!0,animation:!1,sizeField:5,color:"#6E32C2-#1890FF-#12CCCC-#80FF73-#FAFFA8-#FFC838-#FF8C12-#FA541C-#F51D27",annotations:[{type:"image",start:[-3520,2960],end:[3520,-2960],src:m}],legend:{position:"bottom"},tooltip:{fields:["xy","RTT"],showTitle:!1,formatter:function(t){return{name:"RTT of ".concat(t.xy),value:"".concat(Math.round(100*t.RTT)/100," ms")}}}},a.state={data:[{x:-3520,y:-2960,cont:null},{x:3520,y:2960,RTT:null}],last:{x:0,y:0,yaw:2},ticks:-1,quality:0},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshPos()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshPos",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(T)).then((function(t){return t.json()})).then((function(e){t.setState({last:e[0]})})).catch((function(t){console.log(t)}))}},{key:"refreshMap",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(w)).then((function(t){return t.json()})).then((function(e){t.setState({data:[].concat((0,$.Z)(e),[{x:-3520,y:-2960,RTT:0},{x:3520,y:2960,RTT:0}])}),console.log(t.state.data)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=[].concat((0,$.Z)(this.config.annotations),[{type:"dataMarker",position:[this.state.last.x,this.state.last.y],rotate:this.state.last.yaw},{type:"text",content:"(".concat(Math.round(this.state.last.x),",").concat(Math.round(this.state.last.y),")"),style:{fontSize:22,fill:"#fff",textAlign:"left"},position:["1%","3%"]}]);return(0,C.jsx)(h.Z,{sx:v.Z.maincard.sx,content:v.Z.maincard.content,children:(0,C.jsx)(l.Z,{sx:v.Z.box.sx,children:(0,C.jsxs)(a.Z,{spacing:v.Z.stack.spacing,direction:v.Z.stack.direction,alignItems:v.Z.stack.alignItems,children:[(0,C.jsx)(u.Z,{variant:v.Z.typography.title.variant,color:v.Z.typography.title.color,children:"RTT heatmap"}),(0,C.jsx)(p.Z,(0,g.Z)((0,g.Z)({},this.config),{},{data:this.state.data,sx:{width:300,height:300},annotations:t}))]})})})}}]),n}(r.Component),S=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionAMCL_Data",pipeline:[{$project:{dateTime:1,x:1,y:1,yaw:"$orient.yaw"}},{$sort:{dateTime:-1}},{$limit:1}]}),k=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionOdom_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},x:{$toInt:"$x"},y:{$toInt:"$y"},orient:1}},{$addFields:{xy:{$concat:[{$toString:["$x"]},":",{$toString:["$y"]}]}}},{$group:{_id:"$xy",x:{$avg:"$x"},y:{$avg:"$y"},yaw:{$avg:"$orient.yaw"},count:{$count:{}}}}]}),j=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.refreshMap(),a.refreshPos(),a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={type:"density",xField:"x",yField:"y",xAxis:!1,yAxis:!1,colorField:"count",limitInPlot:!0,animation:!1,sizeField:5,color:"#F51D27-#FA541C-#FF8C12-#FFC838-#FAFFA8-#80FF73-#12CCCC-#1890FF-#6E32C2",annotations:[{type:"image",start:[-3520,2960],end:[3520,-2960],src:m}],legend:{position:"bottom"},tooltip:{fields:["_id","count"],title:"Count of occurencies",formatter:function(t){return{name:t._id,value:t.count}}}},a.state={data:[{x:-3520,y:-2960,cont:null},{x:3520,y:2960,count:null}],last:{x:0,y:0,yaw:2},ticks:-1,quality:0},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshPos()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshPos",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(S)).then((function(t){return t.json()})).then((function(e){t.setState({last:e[0]})})).catch((function(t){console.log(t)}))}},{key:"refreshMap",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(k)).then((function(t){return t.json()})).then((function(e){t.setState({data:[].concat((0,$.Z)(e),[{x:-3520,y:-2960,count:null},{x:3520,y:2960,count:null}])})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=[].concat((0,$.Z)(this.config.annotations),[{type:"dataMarker",position:[this.state.last.x,this.state.last.y],rotate:this.state.last.yaw},{type:"text",content:"(".concat(Math.round(this.state.last.x),",").concat(Math.round(this.state.last.y),")"),style:{fontSize:22,fill:"#fff",textAlign:"left"},position:["1%","3%"]}]);return(0,C.jsx)(h.Z,{sx:v.Z.maincard.sx,content:v.Z.maincard.content,children:(0,C.jsx)(l.Z,{sx:v.Z.box.sx,children:(0,C.jsxs)(a.Z,{spacing:v.Z.stack.spacing,direction:v.Z.stack.direction,alignItems:v.Z.stack.alignItems,children:[(0,C.jsx)(u.Z,{variant:v.Z.typography.title.variant,color:v.Z.typography.title.color,children:"Position heatmap"}),(0,C.jsx)(p.Z,(0,g.Z)((0,g.Z)({},this.config),{},{data:this.state.data,sx:{width:300,height:300},annotations:t}))]})})})}}]),n}(r.Component),I=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionAMCL_Data",pipeline:[{$project:{dateTime:1,x:1,y:1,yaw:"$orient.yaw"}},{$sort:{dateTime:-1}},{$limit:1}]}),R=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"PositionOdom_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},x:{$toInt:"$x"},y:{$toInt:"$y"},orient:1}},{$addFields:{xy:{$concat:[{$toString:["$x"]},":",{$toString:["$y"]}]}}},{$unionWith:{coll:"RemoteUnitConection_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},Connect:{$toInt:["$Connect"]},RTT:1}}]}},{$group:{_id:"$dateTime",x:{$avg:"$x"},y:{$avg:"$y"},yaw:{$avg:"$orient.yaw"},Connect:{$avg:"$Connect"},RTT:{$avg:"$RTT"},xy:{$first:"$xy"}}},{$group:{_id:"$dateTime",x:{$avg:"$x"},y:{$avg:"$y"},yaw:{$avg:"$orient.yaw"},Connect:{$avg:"$Connect"},RTT:{$avg:"$RTT"},xy:{$first:"$xy"}}},{$set:{Connect:{$round:["$Connect",2]}}}]}),b=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.refreshMap(),a.refreshPos(),a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={type:"density",xField:"x",yField:"y",xAxis:!1,yAxis:!1,colorField:"Connect",limitInPlot:!0,animation:!1,sizeField:5,color:"#6E32C2-#1890FF-#12CCCC-#80FF73-#FAFFA8-#FFC838-#FF8C12-#FA541C-#F51D27",annotations:[{type:"image",start:[-3520,2960],end:[3520,-2960],src:m}],legend:{position:"bottom"},tooltip:{fields:["xy","Connect"],showTitle:!1,formatter:function(t){return{name:"Connectivity of ".concat(t.xy),value:"".concat(Math.round(100*t.Connect),"%")}}}},a.state={data:[{x:-3520,y:-2960,Connect:null},{x:3520,y:2960,Connect:null}],last:{x:0,y:0,yaw:2},ticks:-1,quality:0},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshPos()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshPos",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(I)).then((function(t){return t.json()})).then((function(e){t.setState({last:e[0]})})).catch((function(t){console.log(t)}))}},{key:"refreshMap",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(R)).then((function(t){return t.json()})).then((function(e){t.setState({data:[].concat((0,$.Z)(e),[{x:-3520,y:-2960,RTT:0},{x:3520,y:2960,RTT:0}])}),console.log(t.state.data)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=[].concat((0,$.Z)(this.config.annotations),[{type:"dataMarker",position:[this.state.last.x,this.state.last.y],rotate:this.state.last.yaw},{type:"text",content:"(".concat(Math.round(this.state.last.x),",").concat(Math.round(this.state.last.y),")"),style:{fontSize:22,fill:"#fff",textAlign:"left"},position:["1%","3%"]}]);return(0,C.jsx)(h.Z,{sx:v.Z.maincard.sx,content:v.Z.maincard.content,children:(0,C.jsx)(l.Z,{sx:v.Z.box.sx,children:(0,C.jsxs)(a.Z,{spacing:v.Z.stack.spacing,direction:v.Z.stack.direction,alignItems:v.Z.stack.alignItems,children:[(0,C.jsx)(u.Z,{variant:v.Z.typography.title.variant,color:v.Z.typography.title.color,children:"Connectivity heatmap"}),(0,C.jsx)(p.Z,(0,g.Z)((0,g.Z)({},this.config),{},{data:this.state.data,sx:{width:300,height:300},annotations:t}))]})})})}}]),n}(r.Component),_=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).hadleChange=function(t,e){o.setState({page:e}),o.componentDidMount()},o.componentDidMount=function(){o.graphs()},o.graphs=function(){switch(o.state.page){case 1:return(0,C.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,C.jsx)(f.Z,{}),(0,C.jsx)(x.Z,{}),(0,C.jsx)(F,{})]});case 2:return(0,C.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,C.jsx)(j,{}),(0,C.jsx)(b,{})]})}},o.state={page:1},o}return(0,o.Z)(n,[{key:"render",value:function(){return(0,C.jsx)(h.Z,{sx:y.Z,content:!1,children:(0,C.jsx)(l.Z,{sx:{p:3,pb:0},children:(0,C.jsxs)(a.Z,{spacing:2,children:[(0,C.jsx)(u.Z,{variant:"h3",color:"textSecondary",children:"Maps"}),this.graphs(),(0,C.jsx)(d.Z,{count:2,defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]})})})}}]),n}(r.Component),D=function(){return(0,C.jsx)(a.Z,{spacing:2,children:(0,C.jsx)(_,{})})}},40040:function(t,e){e.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}}}]);