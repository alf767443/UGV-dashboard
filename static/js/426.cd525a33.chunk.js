"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[426],{66426:function(t,e,n){n.r(e),n.d(e,{default:function(){return D}});var a=n(82937),i=n(1413),r=n(15671),o=n(43144),c=n(60136),s=n(27277),l=n(47313),u=n(78315),d=n(95436),m=n(96543),p=n(89755),f=n(91372),g=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(n[a[i]]=t[a[i]])}return n},h=(0,l.forwardRef)((function(t,e){var n=t.chartRef,a=t.style,i=void 0===a?{height:"inherit"}:a,r=t.className,o=t.loading,c=t.loadingTemplate,s=t.errorTemplate,h=g(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),y=(0,d.Z)(u.Area,h),x=y.chart,v=y.container;return(0,l.useEffect)((function(){(0,m.J)(n,x.current)}),[x.current]),(0,l.useImperativeHandle)(e,(function(){return{getChart:function(){return x.current}}})),l.createElement(p.Z,{errorTemplate:s},o&&l.createElement(f.Z,{loadingTemplate:c,theme:t.theme}),l.createElement("div",{className:r,style:i,ref:v}))})),y=n(8515),x=n(8200),v={graph:{big:{width:800,height:400},medium:{width:400,height:200},small:{width:200,height:200}},stack:{direction:"column",alignItems:"center",spacing:1},typography:{variant:"h5",color:"textSecondary"},box:{sx:{p:2,pb:1}},maincard:{sx:{mt:2},content:!1}},$=n(16157),k=n(62463),Z=n(42669),S=n(46417),j=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Battery_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},current:{$cond:[{$eq:["NaN","$current"]},null,"$current"]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$current"}}},{$sort:{_id:-1}},{$limit:100}]}),w=function(t){(0,c.Z)(n,t);var e=(0,s.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={padding:"auto",xField:"_id",yField:"current",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery current [A]"}},tooltip:{formatter:function(t){return null!=t.current?{name:"Current",value:t.current.toFixed(1)+" A"}:{}}},smooth:!0},a.state={data:[],ticks:-1},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:100}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,y.H)(),(0,y.w)(j)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,S.jsx)(x.Z,{sx:v.maincard.sx,content:v.maincard.content,children:(0,S.jsx)($.Z,{sx:v.box.sx,children:(0,S.jsxs)(k.Z,{spacing:v.stack.spacing,direction:v.stack.direction,alignItems:v.stack.alignItems,children:[(0,S.jsx)(Z.Z,{variant:v.typography.variant,color:v.typography.color,children:"Battery current by time"}),(0,S.jsx)(h,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},v.graph.medium))]})})})}}]),n}(l.Component),I=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Battery_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},percentage:{$cond:[{$eq:["NaN","$percentage"]},null,"$percentage"]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",percentage:{$avg:"$percentage"}}},{$sort:{_id:-1}},{$limit:100},{$project:{percentage:{$multiply:["$percentage",100]}}}]}),b=function(t){(0,c.Z)(n,t);var e=(0,s.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={padding:"auto",xField:"_id",yField:"percentage",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery percentage [%]"}},tooltip:{formatter:function(t){return null!=t.percentage?{name:"Percentage",value:t.percentage.toFixed(1)+"%"}:{}}},smooth:!0},a.state={data:[],ticks:-1},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:100}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,y.H)(),(0,y.w)(I)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,S.jsx)(x.Z,{sx:v.maincard.sx,content:v.maincard.content,children:(0,S.jsx)($.Z,{sx:v.box.sx,children:(0,S.jsxs)(k.Z,{spacing:v.stack.spacing,direction:v.stack.direction,alignItems:v.stack.alignItems,children:[(0,S.jsx)(Z.Z,{variant:v.typography.variant,color:v.typography.color,children:"Battery percentage by time"}),(0,S.jsx)(h,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},v.graph.medium))]})})})}}]),n}(l.Component),T=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Battery_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:{$cond:[{$eq:["NaN","$voltage"]},"None","$voltage"]},current:{$cond:[{$eq:["NaN","$current"]},"None","$current"]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$current"},voltage:{$avg:"$voltage"}}},{$set:{power:{$multiply:["$current","$voltage"]}}},{$project:{_id:1,power:1}},{$sort:{_id:-1}},{$limit:100}]}),_=function(t){(0,c.Z)(n,t);var e=(0,s.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={padding:"auto",xField:"_id",yField:"current",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery power [W]"}},tooltip:{formatter:function(t){return null!=t.current?{name:"Power",value:t.power.toFixed(1)+" W"}:{}}},smooth:!0},a.state={data:[],ticks:-1},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:100}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,y.H)(),(0,y.w)(T)).then((function(t){return t.json()})).then((function(e){t.setState({data:e}),console.log(t.state.data)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,S.jsx)(x.Z,{sx:v.maincard.sx,content:v.maincard.content,children:(0,S.jsx)($.Z,{sx:v.box.sx,children:(0,S.jsxs)(k.Z,{spacing:v.stack.spacing,direction:v.stack.direction,alignItems:v.stack.alignItems,children:[(0,S.jsx)(Z.Z,{variant:v.typography.variant,color:v.typography.color,children:"Battery current by time"}),(0,S.jsx)(h,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},v.graph.medium))]})})})}}]),n}(l.Component),N=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Battery_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:{$cond:[{$eq:["NaN","$voltage"]},null,"$voltage"]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",voltage:{$avg:"$voltage"}}},{$sort:{_id:-1}},{$limit:100}]}),C=function(t){(0,c.Z)(n,t);var e=(0,s.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.timer()},a.componentWillUnmount=function(){clearInterval(a.timer)},a.timer=function(){setInterval((function(){a.canUpdate()}),1e3)},a.config={padding:"auto",xField:"_id",yField:"voltage",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery voltage [V]"}},tooltip:{formatter:function(t){return null!=t.voltage?{name:"Voltage",value:t.voltage.toFixed(1)+" V"}:{}}},smooth:!0},a.state={data:[],ticks:-1},a}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:100}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,y.H)(),(0,y.w)(N)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,S.jsx)(x.Z,{sx:v.maincard.sx,content:v.maincard.content,children:(0,S.jsx)($.Z,{sx:v.box.sx,children:(0,S.jsxs)(k.Z,{spacing:v.stack.spacing,direction:v.stack.direction,alignItems:v.stack.alignItems,children:[(0,S.jsx)(Z.Z,{variant:v.typography.variant,color:v.typography.color,children:"Battery voltage by time"}),(0,S.jsx)(h,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.state.data},v.graph.medium))]})})})}}]),n}(l.Component),D=function(){return(0,S.jsxs)(a.ZP,{container:!0,rowSpacing:1.75,columnSpacing:2,children:[(0,S.jsx)(b,{}),(0,S.jsx)(w,{}),(0,S.jsx)(C,{}),(0,S.jsx)(_,{})]})}}}]);