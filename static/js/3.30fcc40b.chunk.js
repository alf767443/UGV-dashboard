"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[3],{6781:function(t,e,n){n.d(e,{Z:function(){return v}});var i=n(1413),a=n(15671),r=n(43144),o=n(60136),s=n(27277),c=n(47313),l=n(20061),u=n(8515),d=n(46417),h=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.current",right:"$right.current"}},{$sort:{_id:-1}},{$limit:1}]}),f=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},i.data=function(){return console.log(i.state.data.left),[{title:"Left current",ranges:[2,3,3.5],measures:[0],value:Math.round(100*i.state.data.left)/100},{title:"Right current",ranges:[2,3,3.5],measures:[0],value:Math.round(100*i.state.data.right)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(h)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,d.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),g=n(80891),m=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.PWM",right:"$right.PWM"}},{$sort:{_id:-1}},{$limit:1}]}),p=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},i.data=function(){return console.log(i.state.data.left),[{title:"Left PWM",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.left)/100},{title:"Right PWM",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.right)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(m)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,d.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),Z=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:1,left:"$left.rrate",right:"$right.rrate"}},{$sort:{_id:-1}},{$limit:1}]}),x=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},color:{range:["#82FF74","#F5F16E","#FF7772"],measure:"#5B8FF9",target:"#39a3f4"},xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},height:80,width:350},i.data=function(){return console.log(i.state.data.left),[{title:"Left speed",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.left)/100},{title:"Right speed",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.right)/100}]},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,u.H)(),(0,u.w)(Z)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,d.jsx)(l.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()}))}}]),n}(c.Component),v=function(){return(0,d.jsxs)(g.Z,{direction:"column",alignItems:"center",spacing:0,children:[(0,d.jsx)(f,{}),(0,d.jsx)(p,{}),(0,d.jsx)(x,{})]})}},44090:function(t,e){e.Z={graph:{big:{},medium:{},small:{}},stack:{direction:"column",alignItems:"center",spacing:1},typography:{variant:"h5",color:"textSecondary"},box:{sx:{p:2,pb:1}},maincard:{sx:{mt:2},content:!1}}},24003:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});var i=n(62463),a=n(15671),r=n(43144),o=n(60136),s=n(27277),c=n(47313),l=n(16157),u=n(42669),d=n(8200),h=n(26899),f=n(8515),g=n(46417),m=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{_id:0}},{$sort:{dateTime:-1}},{$limit:1e3}]}),p=[{title:"Time",dataIndex:"dateTime",key:"dateTime",sorter:{compare:function(t,e){return t.dateTime-e.dateTime},multiple:1},defaultSortOrder:"descend"},{title:"Left motor",align:"center",children:[{title:"PWM",align:"center",dataIndex:["left","PWM"],key:"PWM_left"},{title:"Rot. rate",align:"center",dataIndex:["left","rrate"],key:"rrate_left"},{title:"Current",align:"center",dataIndex:["left","current"],key:"current_left"}]},{title:"Right motor",align:"center",children:[{title:"PWM",align:"center",dataIndex:["right","PWM"],key:"PWM_right"},{title:"Rot. rate",align:"center",dataIndex:["right","rrate"],key:"rrate_right"},{title:"Current",align:"center",dataIndex:["right","current"],key:"current_right"}]}],Z=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList()},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,f.H)(),(0,f.w)(m)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,g.jsx)(h.Z,{columns:p,dataSource:this.state.data,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange,sx:this.props.sx})}}]),n}(c.Component),x=n(40040),v=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:x.Z,content:!1,children:(0,g.jsx)(l.Z,{sx:{p:3,pb:0},children:(0,g.jsxs)(i.Z,{spacing:2,children:[(0,g.jsx)(u.Z,{variant:"h3",color:"textSecondary",children:"Motors data"}),(0,g.jsx)(Z,{})]})})})}}]),n}(c.Component),y=n(56448),k=n(1413),S=n(93433),j=n(78315),M=n(95436),I=n(96543),F=n(89755),$=n(91372),w=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n},b=(0,c.forwardRef)((function(t,e){var n=t.chartRef,i=t.style,a=void 0===i?{height:"inherit"}:i,r=t.className,o=t.loading,s=t.loadingTemplate,l=t.errorTemplate,u=w(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),d=(0,M.Z)(j.Line,u),h=d.chart,f=d.container;return(0,c.useEffect)((function(){(0,I.J)(n,h.current)}),[h.current]),(0,c.useImperativeHandle)(e,(function(){return{getChart:function(){return h.current}}})),c.createElement(F.Z,{errorTemplate:l},o&&c.createElement($.Z,{loadingTemplate:s,theme:t.theme}),c.createElement("div",{className:r,style:a,ref:f}))})),_=n(44090),C=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"left.current":1,"right.current":1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$"+t+".current"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},L=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={padding:"auto",xField:"_id",yField:"current",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor current [A]"}},tooltip:{formatter:function(t){return null!=t.current?{name:"Current",value:t.current.toFixed(1)+" A"}:{}}},smooth:!0},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,f.H)(),(0,f.w)(C("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).catch((function(t){console.log(t)})),fetch((0,f.H)(),(0,f.w)(C("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).catch((function(t){console.log(t)})),this.setState({data:[].concat((0,S.Z)(this.state.left),(0,S.Z)(this.state.right))})}},{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:_.Z.maincard.sx,content:_.Z.maincard.content,children:(0,g.jsx)(l.Z,{sx:_.Z.box.sx,children:(0,g.jsxs)(i.Z,{spacing:_.Z.stack.spacing,direction:_.Z.stack.direction,alignItems:_.Z.stack.alignItems,children:[(0,g.jsx)(u.Z,{variant:_.Z.typography.variant,color:_.Z.typography.color,children:"Battery current by time"}),(0,g.jsx)(b,(0,k.Z)((0,k.Z)({},this.config),{},{data:this.state.data},_.Z.graph.medium))]})})})}}]),n}(c.Component),D=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"left.PWM":1,"right.PWM":1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",PWM:{$avg:"$"+t+".PWM"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},T=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={padding:"auto",xField:"_id",yField:"PWM",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor PWM [%]"}},tooltip:{formatter:function(t){return null!=t.PWM?{name:"PWM",value:t.PWM.toFixed(1)+" %"}:{}}},smooth:!0},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,f.H)(),(0,f.w)(D("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).catch((function(t){console.log(t)})),fetch((0,f.H)(),(0,f.w)(D("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).catch((function(t){console.log(t)})),this.setState({data:[].concat((0,S.Z)(this.state.left),(0,S.Z)(this.state.right))})}},{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:_.Z.maincard.sx,content:_.Z.maincard.content,children:(0,g.jsx)(l.Z,{sx:_.Z.box.sx,children:(0,g.jsxs)(i.Z,{spacing:_.Z.stack.spacing,direction:_.Z.stack.direction,alignItems:_.Z.stack.alignItems,children:[(0,g.jsx)(u.Z,{variant:_.Z.typography.variant,color:_.Z.typography.color,children:"Battery PWM by time"}),(0,g.jsx)(b,(0,k.Z)((0,k.Z)({},this.config),{},{data:this.state.data},_.Z.graph.medium))]})})})}}]),n}(c.Component),O=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_buffer",collection:"Motor_Data",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"left.rrate":1,"right.rrate":1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",rrate:{$avg:"$"+t+".rrate"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},W=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={padding:"auto",xField:"_id",yField:"rrate",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor rrate [rpm?]"}},tooltip:{formatter:function(t){return null!=t.rrate?{name:"Rotation rate",value:t.rrate.toFixed(1)+" rpm?"}:{}}},smooth:!0},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,f.H)(),(0,f.w)(O("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).catch((function(t){console.log(t)})),fetch((0,f.H)(),(0,f.w)(O("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).catch((function(t){console.log(t)})),this.setState({data:[].concat((0,S.Z)(this.state.left),(0,S.Z)(this.state.right))})}},{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:_.Z.maincard.sx,content:_.Z.maincard.content,children:(0,g.jsx)(l.Z,{sx:_.Z.box.sx,children:(0,g.jsxs)(i.Z,{spacing:_.Z.stack.spacing,direction:_.Z.stack.direction,alignItems:_.Z.stack.alignItems,children:[(0,g.jsx)(u.Z,{variant:_.Z.typography.variant,color:_.Z.typography.color,children:"Battery rrate by time"}),(0,g.jsx)(b,(0,k.Z)((0,k.Z)({},this.config),{},{data:this.state.data},_.Z.graph.medium))]})})})}}]),n}(c.Component),U=n(6781),P=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).hadleChange=function(t,e){r.setState({page:e}),r.componentDidMount()},r.componentDidMount=function(){r.graphs()},r.graphs=function(){switch(r.state.page){case 1:return(0,g.jsxs)(i.Z,{direction:"row",spacing:2,children:[(0,g.jsx)(L,{}),(0,g.jsx)(T,{}),(0,g.jsx)(W,{})]});case 2:return(0,g.jsx)(i.Z,{direction:"row",spacing:2,children:(0,g.jsx)(U.Z,{})})}},r.state={page:1},r}return(0,r.Z)(n,[{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:x.Z,content:!1,children:(0,g.jsx)(l.Z,{sx:{p:3,pb:0},children:(0,g.jsxs)(i.Z,{spacing:2,children:[(0,g.jsx)(u.Z,{variant:"h3",color:"textSecondary",children:"Motors plots"}),this.graphs(),(0,g.jsx)(y.Z,{count:2,defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]})})})}}]),n}(c.Component),R=function(){return(0,g.jsxs)(i.Z,{spacing:2,children:[(0,g.jsx)(P,{}),(0,g.jsx)(v,{})]})}},40040:function(t,e){e.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}}}]);