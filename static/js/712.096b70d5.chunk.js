"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[712],{5391:function(t,e){e.Z={typography:{align:"left",variant:"h3",color:"textSecondary",xs:12,sm:12,md:12,lg:12,xl:12},stack:{spacing:2,xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:0}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:0,ml:0,mb:0,gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:6,xl:6,spacing:0}}}},93062:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});var r=n(1413),i=n(82937),a=n(15671),o=n(43144),s=n(60136),c=n(27277),l=n(47313),u=n(16157),d=n(62463),m=n(42669),h=n(80169),g=n(77756),Z=n(8515),f=n(46417),p=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{_id:0}},{$sort:{dateTime:-1}},{$limit:1e3}]}),x=[{title:"Time",dataIndex:"dateTime",key:"dateTime",sorter:{compare:function(t,e){return t.dateTime-e.dateTime},multiple:1},defaultSortOrder:"descend"},{title:"Percentage",dataIndex:["percentage"],key:"percentage"},{title:"Voltage",dataIndex:["voltage"],key:"voltage"},{title:"Current",dataIndex:["current"],key:"current"},{title:"Temperature",dataIndex:["temperature"],key:"temperature"}],y=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList()},r.state={data:[],ticks:-1},r}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(p)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(g.Z,{columns:x,dataSource:this.state.data,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange,sx:this.props.sx})}}]),n}(l.Component),v=n(40040),j=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(h.Z,{sx:v.Z,content:!1,children:(0,f.jsx)(u.Z,{sx:{p:3,pb:0},children:(0,f.jsxs)(d.Z,{spacing:2,children:[(0,f.jsx)(m.Z,{variant:"h3",color:"textSecondary",children:"Battery data"}),(0,f.jsx)(y,{})]})})})}}]),n}(l.Component),k=n(56448),b=n(2122),w=n(83007),T=n(90722),C=n(44090),S=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:1,current:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$current"},voltage:{$avg:"$voltage"}}},{$set:{power:{$multiply:["$current","$voltage"]}}},{$project:{_id:1,power:1}},{$sort:{_id:-1}},{$limit:100}]}),$=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.canUpdate()}),1e3)},r.config={xField:"_id",yField:"power",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery power [W]"}},tooltip:{formatter:function(t){return null!=t.power?{name:"Power",value:t.power.toFixed(1)+" W"}:{}}}},r.state={data:[],ticks:-1},r}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(S)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(h.Z,(0,r.Z)((0,r.Z)({},C.Z.maincard),{},{children:(0,f.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},C.Z.stack),{},{children:[(0,f.jsx)(m.Z,(0,r.Z)((0,r.Z)({},C.Z.typography.title),{},{children:"Battery power by time"})),(0,f.jsx)(T.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),C.Z.plot),{},{data:this.state.data}))]}))}))}}]),n}(l.Component),I=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Battery",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},voltage:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",voltage:{$avg:"$voltage"}}},{$sort:{_id:-1}},{$limit:100}]}),O=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.canUpdate()}),1e3)},r.config={xField:"_id",yField:"voltage",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Battery voltage [V]"}},tooltip:{formatter:function(t){return null!=t.voltage?{name:"Voltage",value:t.voltage.toFixed(1)+" V"}:{}}}},r.state={data:[],ticks:-1},r}return(0,o.Z)(n,[{key:"canUpdate",value:function(){JSON.parse(window.localStorage.getItem("fromLocal"))||this.state.ticks<=0?(this.setState({ticks:10}),this.refreshList()):JSON.parse(window.localStorage.getItem("fromLocal"))||this.setState({ticks:this.state.ticks-1})}},{key:"refreshList",value:function(){var t=this;fetch((0,Z.H)(),(0,Z.w)(I)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(h.Z,(0,r.Z)((0,r.Z)({},C.Z.maincard),{},{children:(0,f.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},C.Z.stack),{},{children:[(0,f.jsx)(m.Z,(0,r.Z)((0,r.Z)({},C.Z.typography.title),{},{children:"Battery voltage by time"})),(0,f.jsx)(T.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),C.Z.plot),{},{data:this.state.data}))]}))}))}}]),n}(l.Component),P=n(47103),_=n(5391),D=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,a.Z)(this,n),(o=e.call(this,t)).hadleChange=function(t,e){o.setState({page:e}),o.componentDidMount()},o.componentDidMount=function(){o.graphs()},o.graphs=function(){switch(o.state.page){case 1:return(0,f.jsxs)(i.ZP,(0,r.Z)((0,r.Z)({container:!0},_.Z.grid.main),{},{children:[(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},_.Z.grid.item),{},{children:(0,f.jsx)(b.Z,{})})),(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},_.Z.grid.item),{},{children:(0,f.jsx)(w.Z,{})}))]}));case 2:return(0,f.jsxs)(i.ZP,(0,r.Z)((0,r.Z)({container:!0},_.Z.grid.main),{},{children:[(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},_.Z.grid.item),{},{children:(0,f.jsx)($,{})})),(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},_.Z.grid.item),{},{children:(0,f.jsx)(O,{})}))]}));case 3:return(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({container:!0},_.Z.grid.main),{},{children:(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},_.Z.grid.item),{},{children:(0,f.jsx)(P.Z,{})}))}))}},o.state={page:1},o}return(0,o.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(h.Z,(0,r.Z)((0,r.Z)({},_.Z.box),{},{children:(0,f.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},_.Z.stack),{},{children:[(0,f.jsx)(m.Z,(0,r.Z)((0,r.Z)({},_.Z.typography),{},{children:"Battery plots"})),this.graphs(),(0,f.jsx)(k.Z,{count:3,defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]}))}))}}]),n}(l.Component),N=n(88461),R=function(){return(0,f.jsxs)(i.ZP,(0,r.Z)((0,r.Z)({container:!0},N.Z.grid.main),{},{children:[(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},N.Z.grid.item),{},{children:(0,f.jsx)(D,{})})),(0,f.jsx)(i.ZP,(0,r.Z)((0,r.Z)({item:!0},N.Z.grid.item),{},{children:(0,f.jsx)(j,{})}))]}))}},88461:function(t,e){e.Z={stack:{spacing:0,direction:"column",alignItems:"center",xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:2},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:12,xl:12,spacing:0,sx:{mt:0,mr:1,ml:1,mb:0}}}}},40040:function(t,e){e.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}},90722:function(t,e,n){var r=n(47313),i=n(78315),a=n(95436),o=n(96543),s=n(89755),c=n(91372),l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},u=(0,r.forwardRef)((function(t,e){var n=t.chartRef,u=t.style,d=void 0===u?{height:"inherit"}:u,m=t.className,h=t.loading,g=t.loadingTemplate,Z=t.errorTemplate,f=l(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),p=(0,a.Z)(i.Area,f),x=p.chart,y=p.container;return(0,r.useEffect)((function(){(0,o.J)(n,x.current)}),[x.current]),(0,r.useImperativeHandle)(e,(function(){return{getChart:function(){return x.current}}})),r.createElement(s.Z,{errorTemplate:Z},h&&r.createElement(c.Z,{loadingTemplate:g,theme:t.theme}),r.createElement("div",{className:m,style:d,ref:y}))}));e.Z=u},20061:function(t,e,n){var r=n(47313),i=n(78315),a=n(95436),o=n(96543),s=n(89755),c=n(91372),l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},u=(0,r.forwardRef)((function(t,e){var n=t.chartRef,u=t.style,d=void 0===u?{height:"inherit"}:u,m=t.className,h=t.loading,g=t.loadingTemplate,Z=t.errorTemplate,f=l(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),p=(0,a.Z)(i.Bullet,f),x=p.chart,y=p.container;return(0,r.useEffect)((function(){(0,o.J)(n,x.current)}),[x.current]),(0,r.useImperativeHandle)(e,(function(){return{getChart:function(){return x.current}}})),r.createElement(s.Z,{errorTemplate:Z},h&&r.createElement(c.Z,{loadingTemplate:g,theme:t.theme}),r.createElement("div",{className:m,style:d,ref:y}))}));e.Z=u}}]);