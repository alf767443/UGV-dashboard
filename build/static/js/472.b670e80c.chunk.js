"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[472],{8384:function(t,e,n){n.d(e,{Z:function(){return x}});var r=n(1413),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(47313),c=n(9019),u=n(42832),p=n(61113),m=n(77970),d=n(8175),h={typography:{align:"left",variant:"h3",color:"textSecondary",xs:12,sm:12,md:12,lg:12,xl:12},stack:{spacing:2,xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:0}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:0,ml:0,mb:0,gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:6,xl:6,spacing:0}}},f=n(79298),g=n(68756),Z=n(97849),y=n(16031),P=n(46417),x=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).hadleChange=function(t,e){i.setState({page:e}),i.componentDidMount()},i.componentDidMount=function(){i.graphs()},i.numberPages=function(){return(0,y.round)(i.props.Plot.SimplePlot.length/2)+i.props.Plot.LargePlot.length+i.props.Plot.BigPlot.length},i.graphs=function(){var t=0,e=0;switch(!0){case i.state.page<=(0,y.round)(i.props.Plot.SimplePlot.length/2):return console.log("a"),t=2*(i.state.page-1),e=2*i.state.page>i.props.Plot.SimplePlot.length?t+1:t+2,(0,P.jsx)(c.ZP,(0,r.Z)((0,r.Z)({container:!0},h.grid.main),{},{children:i.props.Plot.SimplePlot.slice(t,e).map((function(t){return(0,l.createElement)(c.ZP,(0,r.Z)((0,r.Z)({item:!0},h.grid.item),{},{key:t.key}),(0,P.jsx)(f.Z,{graph:t.plot,title:t.title,position:null,static:!0}))}))}));case i.state.page>(0,y.round)(i.props.Plot.SimplePlot.length/2)&&i.state.page<=(0,y.round)(i.props.Plot.SimplePlot.length/2)+i.props.Plot.LargePlot.length:return console.log("b"),e=(t=i.state.page-(0,y.round)(i.props.Plot.SimplePlot.length/2)-1)+1,(0,P.jsx)(c.ZP,(0,r.Z)((0,r.Z)({container:!0},h.grid.main),{},{children:i.props.Plot.LargePlot.slice(t,e).map((function(t){return(0,l.createElement)(c.ZP,(0,r.Z)((0,r.Z)({item:!0},h.grid.item),{},{key:t.key}),(0,P.jsx)(g.Z,{graph:t.plot,title:t.title,position:null,static:!0}))}))}));case i.state.page>(0,y.round)(i.props.Plot.SimplePlot.length/2)+i.props.Plot.LargePlot.length&&i.state.page<=(0,y.round)(i.props.Plot.SimplePlot.length/2)+i.props.Plot.LargePlot.length+i.props.Plot.BigPlot.length:return console.log("c"),e=(t=i.state.page-(0,y.round)(i.props.Plot.SimplePlot.length/2)+i.props.Plot.LargePlot.length-1)+1,console.log(i.props.Plot.BigPlot.slice(t,e)),(0,P.jsx)(c.ZP,(0,r.Z)((0,r.Z)({container:!0},h.grid.main),{},{children:i.props.Plot.BigPlot.slice(t,e).map((function(t){return(0,l.createElement)(c.ZP,(0,r.Z)((0,r.Z)({item:!0},h.grid.item),{},{key:t.key}),(0,P.jsx)(Z.Z,{graph:t.plot,title:t.title,position:null,static:!0}))}))}));default:P.Fragment}},i.state={page:1},i}return(0,i.Z)(n,[{key:"render",value:function(){return(0,P.jsx)(d.Z,(0,r.Z)((0,r.Z)({},h.box),{},{children:(0,P.jsxs)(u.Z,(0,r.Z)((0,r.Z)({},h.stack),{},{children:[(0,P.jsx)(p.Z,(0,r.Z)((0,r.Z)({},h.typography),{},{children:this.props.title})),this.graphs(),(0,P.jsx)(m.Z,{count:this.numberPages(),defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]}))}))}}]),n}(l.Component)},46845:function(t,e,n){n.d(e,{Z:function(){return T}});var r=n(1413),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(47313),c=n(90722),u=n(8515),p=n(44090),m=n(46417),d=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"computer.memory":1}},{$set:{memoryPercent:{$arrayElemAt:["$computer.memory",2]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",memoryPercent:{$avg:"$memoryPercent"}}},{$sort:{_id:-1}},{$limit:100}]}),h=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.refreshList()}),5e3)},r.config={xField:"_id",yField:"memoryPercent",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Memory percent [%]"}},tooltip:{formatter:function(t){return null!=t.memoryPercent?{name:"Memory percent",value:t.memoryPercent.toFixed(1)+" %"}:{}}}},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(d)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(c.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),p.Z.plot),{},{data:this.state.data}))}}]),n}(l.Component),f=n(93433),g=n(82597),Z=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"computer.cpu_perc":1}},{$set:{cpuPercent:{$arrayElemAt:["$computer.cpu_perc",t]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",cpuPercent:{$avg:"$cpuPercent"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{cpu:t.toString()}}]})},y=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList(),r.timer()},r.componentWillUnmount=function(){clearInterval(r.timer)},r.timer=function(){setInterval((function(){r.refreshList()}),5e3)},r.config={xField:"_id",yField:"cpuPercent",seriesField:"cpu",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"CPU percent [%]"}},tooltip:{formatter:function(t){return null!=t.cpuPercent?{name:"CPU"+t.cpu,value:t.cpuPercent.toFixed(1)+" %"}:{}}}},r.state={data:[],temp:[],ticks:-1},r}return(0,i.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(Z(0))).then((function(t){return t.json()})).then((function(e){t.setState({_1:(0,f.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(1))).then((function(t){return t.json()})).then((function(e){t.setState({_2:(0,f.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(2))).then((function(t){return t.json()})).then((function(e){t.setState({_3:(0,f.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(3))).then((function(t){return t.json()})).then((function(e){t.setState({data:[].concat((0,f.Z)(t.state._1),(0,f.Z)(t.state._2),(0,f.Z)(t.state._3),(0,f.Z)(e))})})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(g.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),p.Z.plot),{},{data:this.state.data}))}}]),n}(l.Component),P=n(55139),x=n(95436),v=n(96543),$=n(89755),b=n(55730),C=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},j=(0,l.forwardRef)((function(t,e){var n=t.chartRef,r=t.style,o=void 0===r?{height:"inherit"}:r,i=t.className,a=t.loading,s=t.loadingTemplate,c=t.errorTemplate,u=C(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),p=(0,x.Z)(P.qu,u),m=p.chart,d=p.container;return(0,l.useEffect)((function(){(0,v.J)(n,m.current)}),[m.current]),(0,l.useImperativeHandle)(e,(function(){return{getChart:function(){return m.current}}})),l.createElement($.Z,{errorTemplate:c},a&&l.createElement(b.Z,{loadingTemplate:s,theme:t.theme}),l.createElement("div",{className:i,style:o,ref:d}))})),k=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$process",preserveNullAndEmptyArrays:!1}},{$addFields:{process:{value:{$sum:{$divide:["$process.cpu_percent",{$size:["$computer.cpu_perc"]}]}}}}},{$group:{_id:"$process.username",value:{$sum:{$divide:["$process.cpu_percent",{$size:["$computer.cpu_perc"]}]}},children:{$push:"$process"},count:{$count:{}}}},{$addFields:{label:"$_id"}}]}),S=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList()},r.config={innerRadius:.3,interactions:[{type:"element-active"}],hierarchyConfig:{field:"value"},drilldown:{breadCrumb:{rootText:"root"}},tooltip:{formatter:function(t){return{name:t.label,value:"".concat(t.value,"%")}}},label:{layout:[{type:"limit-in-shape"}]}},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(k)).then((function(t){return t.json()})).then((function(e){t.setState({data:{label:"root",children:(0,f.Z)(e)}})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(j,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),p.Z.plot),{},{data:this.state.data}))}}]),n}(l.Component),_=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$process",preserveNullAndEmptyArrays:!1}},{$addFields:{process:{value:{$sum:["$process.memory_percent"]}}}},{$group:{_id:"$process.username",value:{$sum:"$process.memory_percent"},children:{$push:"$process"},count:{$count:{}}}},{$addFields:{label:"$_id"}}]}),w=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).componentDidMount=function(){r.refreshList()},r.config={innerRadius:.3,interactions:[{type:"element-active"}],hierarchyConfig:{field:"value"},drilldown:{breadCrumb:{rootText:"root"}},tooltip:{formatter:function(t){return{name:t.label,value:"".concat(t.value,"%")}}},label:{layout:[{type:"limit-in-shape"}]}},r.state={data:[],ticks:-1},r}return(0,i.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(_)).then((function(t){return t.json()})).then((function(e){t.setState({data:{label:"root",children:(0,f.Z)(e)}})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(j,(0,r.Z)((0,r.Z)((0,r.Z)({},this.config),p.Z.plot),{},{data:this.state.data}))}}]),n}(l.Component),T={SimplePlot:[{plot:(0,m.jsx)(h,{}),title:"Memory percent by time",label:"Memory by time",key:"cpu-memory-time-area"},{plot:(0,m.jsx)(y,{}),title:"CPU percent by time",label:"CPU by time",key:"cpu-cpu-time-area"},{plot:(0,m.jsx)(S,{}),title:"CPU sunburst",label:"CPU sunburst",key:"cpu-user-sun-brush"},{plot:(0,m.jsx)(w,{}),title:"Memory sunburst",label:"Memory sunburst",key:"memory-user-sun-brush"}],LargePlot:[],BigPlot:[]}},58472:function(t,e,n){n.r(e),n.d(e,{default:function(){return $}});var r=n(1413),o=n(32063),i=n(15671),a=n(43144),s=n(60136),l=n(29388),c=n(47313),u=n(57829),p=n(42832),m=n(61113),d=n(8175),h=n(45639),f=n(40040),g=n(46417),Z=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$project:{_id:0,header:0,process:0,"computer.net_conn":0}},{$sort:{dateTime:-1}},{$limit:10}]}),y=function(t){(0,s.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,g.jsx)(d.Z,{sx:f.Z,content:!1,children:(0,g.jsxs)(u.Z,{sx:{p:3,pb:0},children:[(0,g.jsx)(p.Z,{spacing:2,children:(0,g.jsx)(m.Z,{variant:"h3",color:"textSecondary",children:"Computer uses data table"})}),(0,g.jsx)(h.Z,{raw:Z})]})})}}]),n}(c.Component),P=n(8384),x=n(46845),v=n(88461),$=function(){return(0,g.jsxs)(o.Z,(0,r.Z)((0,r.Z)({container:!0},v.Z.grid.main),{},{children:[(0,g.jsx)(o.Z,(0,r.Z)((0,r.Z)({item:!0},v.Z.grid.item),{},{children:(0,g.jsx)(P.Z,{Plot:x.Z})})),(0,g.jsx)(o.Z,(0,r.Z)((0,r.Z)({item:!0},v.Z.grid.item),{},{children:(0,g.jsx)(y,{})}))]}))}},88461:function(t,e){e.Z={stack:{spacing:0,direction:"column",alignItems:"center",xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:2},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:12,xl:12,spacing:0,sx:{mt:0,mr:1,ml:1,mb:0}}}}},45639:function(t,e,n){n.d(e,{Z:function(){return m}});var r=n(1413),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(47313),c=n(28559),u=n(8515),p=n(46417),m=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).fetchData=function(){i.setState({loading:!0}),fetch((0,u.HQ)(),(0,u.wY)(i.props.raw)).then((function(t){return t.json()})).then((function(t){var e=i.generateColumns(t);i.setState({loading:!1,data:t,columns:e})})).catch((function(t){console.log(t),i.setState({loading:!1})}))},i.generateColumns=function(t){return null===t[0]?null:Object.keys(t[0]).map((function(t){return{title:t,dataIndex:t,key:t,sorter:!0,render:function(t){if("object"===typeof t){var e=i.generateColumns([t]),n=[t];return(0,p.jsx)(c.Z,{columns:e,dataSource:n,pagination:!1,size:"small"})}return t}}})).sort((function(t,e){return i.sortColumn(t.title,e.title)}))},i.sortColumn=function(t,e){return"dateTime"==t?-1:"dateTime"==e?1:t.toUpperCase()<e.toUpperCase()?-1:t.toUpperCase()>e.toUpperCase()?1:0},i.handleTableChange=function(t,e,n){var o=(0,r.Z)({},i.state.pagination);o.current=t.current,i.setState({pagination:o}),i.fetchData((0,r.Z)({results:t.pageSize,page:t.current,sortField:n.field,sortOrder:n.order},e))},i.state={data:[],pagination:{},loading:!1,columns:[]},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.data,r=t.columns;return(0,p.jsx)(c.Z,{columns:r,rowKey:function(t){return t._id},dataSource:n,pagination:!0,loading:e,onChange:this.handleTableChange,scroll:{scrollToFirstRowOnChange:!0,x:!0},size:"small",tableLayout:"auto",width:"auto"})}}]),n}(l.Component)},40040:function(t,e){e.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}}}]);