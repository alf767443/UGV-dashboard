"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[674],{46845:function(t,e,n){n.d(e,{Z:function(){return S}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),l=n(29388),c=n(47313),s=n(90722),u=n(8515),d=n(44090),f=n(46417),m=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"computer.memory":1}},{$set:{memoryPercent:{$arrayElemAt:["$computer.memory",2]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",memoryPercent:{$avg:"$memoryPercent"}}},{$sort:{_id:-1}},{$limit:100}]}),h=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"memoryPercent",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Memory percent [%]"}},tooltip:{formatter:function(t){return null!=t.memoryPercent?{name:"Memory percent",value:t.memoryPercent.toFixed(1)+" %"}:{}}}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(m)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(s.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),p=n(93433),g=n(82597),Z=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},"computer.cpu_perc":1}},{$set:{cpuPercent:{$arrayElemAt:["$computer.cpu_perc",t]}}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",cpuPercent:{$avg:"$cpuPercent"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{cpu:t.toString()}}]})},y=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"cpuPercent",seriesField:"cpu",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"CPU percent [%]"}},tooltip:{formatter:function(t){return null!=t.cpuPercent?{name:"CPU"+t.cpu,value:t.cpuPercent.toFixed(1)+" %"}:{}}}},i.state={data:[],temp:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(Z(0))).then((function(t){return t.json()})).then((function(e){t.setState({_1:(0,p.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(1))).then((function(t){return t.json()})).then((function(e){t.setState({_2:(0,p.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(2))).then((function(t){return t.json()})).then((function(e){t.setState({_3:(0,p.Z)(e)})})).then((function(){fetch((0,u.HQ)(),(0,u.wY)(Z(3))).then((function(t){return t.json()})).then((function(e){t.setState({data:[].concat((0,p.Z)(t.state._1),(0,p.Z)(t.state._2),(0,p.Z)(t.state._3),(0,p.Z)(e))})})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(g.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),v=n(55139),$=n(95436),x=n(96543),k=n(89755),b=n(55730),j=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},C=(0,c.forwardRef)((function(t,e){var n=t.chartRef,i=t.style,r=void 0===i?{height:"inherit"}:i,o=t.className,a=t.loading,l=t.loadingTemplate,s=t.errorTemplate,u=j(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),d=(0,$.Z)(v.qu,u),f=d.chart,m=d.container;return(0,c.useEffect)((function(){(0,x.J)(n,f.current)}),[f.current]),(0,c.useImperativeHandle)(e,(function(){return{getChart:function(){return f.current}}})),c.createElement(k.Z,{errorTemplate:s},a&&c.createElement(b.Z,{loadingTemplate:l,theme:t.theme}),c.createElement("div",{className:o,style:r,ref:m}))})),P=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$process",preserveNullAndEmptyArrays:!1}},{$addFields:{process:{value:{$sum:{$divide:["$process.cpu_percent",{$size:["$computer.cpu_perc"]}]}}}}},{$group:{_id:"$process.username",value:{$sum:{$divide:["$process.cpu_percent",{$size:["$computer.cpu_perc"]}]}},children:{$push:"$process"},count:{$count:{}}}},{$addFields:{label:"$_id"}}]}),T=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList()},i.config={innerRadius:.3,interactions:[{type:"element-active"}],hierarchyConfig:{field:"value"},drilldown:{breadCrumb:{rootText:"root"}},tooltip:{formatter:function(t){return{name:t.label,value:"".concat(t.value,"%")}}},label:{layout:[{type:"limit-in-shape"}]}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(P)).then((function(t){return t.json()})).then((function(e){t.setState({data:{label:"root",children:(0,p.Z)(e)}})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(C,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),_=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Processes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$process",preserveNullAndEmptyArrays:!1}},{$addFields:{process:{value:{$sum:["$process.memory_percent"]}}}},{$group:{_id:"$process.username",value:{$sum:"$process.memory_percent"},children:{$push:"$process"},count:{$count:{}}}},{$addFields:{label:"$_id"}}]}),M=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList()},i.config={innerRadius:.3,interactions:[{type:"element-active"}],hierarchyConfig:{field:"value"},drilldown:{breadCrumb:{rootText:"root"}},tooltip:{formatter:function(t){return{name:t.label,value:"".concat(t.value,"%")}}},label:{layout:[{type:"limit-in-shape"}]}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(_)).then((function(t){return t.json()})).then((function(e){t.setState({data:{label:"root",children:(0,p.Z)(e)}})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(C,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),S={SimplePlot:[{plot:(0,f.jsx)(h,{}),title:"Memory percent by time",label:"Memory by time",key:"cpu-memory-time-area"},{plot:(0,f.jsx)(y,{}),title:"CPU percent by time",label:"CPU by time",key:"cpu-cpu-time-area"},{plot:(0,f.jsx)(T,{}),title:"CPU sunburst",label:"CPU sunburst",key:"cpu-user-sun-brush"},{plot:(0,f.jsx)(M,{}),title:"Memory sunburst",label:"Memory sunburst",key:"memory-user-sun-brush"}],LargePlot:[],BigPlot:[]}},58594:function(t,e,n){n.d(e,{Z:function(){return p}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),l=n(29388),c=n(47313),s=n(90722),u=n(8515),d=n(44090),f=n(46417),m=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Connection",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},RTT:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",RTT:{$avg:"$RTT"}}},{$sort:{_id:-1}},{$limit:100}]}),h=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"RTT",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Connection RTT [s]"}},tooltip:{formatter:function(t){return null!=t.RTT?{name:"RTT",value:t.RTT.toFixed(1)+" s"}:{}}}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(m)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(s.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),p={SimplePlot:[{plot:(0,f.jsx)(h,{}),title:"Connection RTT by time",label:"Connection RTT by time",key:"connection-rtt-time-area"}],LargePlot:[],BigPlot:[]}},59615:function(t,e,n){n.d(e,{Z:function(){return S}});var i=n(1413),r=n(93433),o=n(15671),a=n(43144),l=n(60136),c=n(29388),s=n(47313),u=n(82597),d=n(8515),f=n(44090),m=n(46417),h=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},leftCurrent:1,rightCurrent:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",current:{$avg:"$"+t+"Current"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},p=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"current",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor current [A]"}},tooltip:{formatter:function(t){return null!=t.current?{name:"Current",value:t.current.toFixed(1)+" A"}:{}}}},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(h("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).then((function(){fetch((0,d.HQ)(),(0,d.wY)(h("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).then((function(){t.setState({data:[].concat((0,r.Z)(t.state.left),(0,r.Z)(t.state.right))}),clearInterval(t.timer)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),f.Z.plot),{},{data:this.state.data}))}}]),n}(s.Component),g=n(20061),Z=n(42832),y=n(61113),v=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:1,left:"$leftCurrent",right:"$rightCurrent"}},{$sort:{dateTime:-1}},{$limit:1}]}),$=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={color:{range:["#FF7772","#F5F16E","#82FF74"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[2,3,3.5],measures:[0],value:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[2,3,3.5],measures:[0],value:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(v)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(Z.Z,{children:[(0,m.jsx)(g.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},f.Z.bullet.dual)),(0,m.jsx)(y.Z,(0,i.Z)((0,i.Z)({},f.Z.typography.subtitle),{},{children:"Current"}))]})}}]),n}(s.Component),x=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:1,left:"$leftPwmDrive",right:"$rightPwmDrive"}},{$sort:{_id:-1}},{$limit:1}]}),k=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={color:{range:["#FF7772","#F5F16E","#82FF74"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[250,300,350],measures:[0],value:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[250,300,350],measures:[0],value:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(x)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(Z.Z,{children:[(0,m.jsx)(g.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},f.Z.bullet.dual)),(0,m.jsx)(y.Z,(0,i.Z)((0,i.Z)({},f.Z.typography.subtitle),{},{children:"PWM"}))]})}}]),n}(s.Component),b=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:1,left:"$leftRotateRate",right:"$rightRotateRate"}},{$sort:{_id:-1}},{$limit:1}]}),j=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={color:{range:["#FF7772","#F5F16E","#82FF74"],measure:"#5B8FF9",target:"#39a3f4"}},i.data=function(){return[{title:"Right",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.right)/100},{title:"Left",ranges:[65,85,100],measures:[0],value:Math.round(100*i.state.data.left)/100}]},i.state={data:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(b)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0]})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsxs)(Z.Z,{children:[(0,m.jsx)(g.Z,(0,i.Z)((0,i.Z)({},this.config),{},{data:this.data()},f.Z.bullet.dual)),(0,m.jsx)(y.Z,(0,i.Z)((0,i.Z)({},f.Z.typography.subtitle),{},{children:"Rot. rate"}))]})}}]),n}(s.Component),C=function(){return(0,m.jsxs)(Z.Z,(0,i.Z)((0,i.Z)({},f.Z.bullet.stack),{},{children:[(0,m.jsx)($,{}),(0,m.jsx)(k,{}),(0,m.jsx)(j,{})]}))},P=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},leftPwmDrive:1,rightPwmDrive:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",PWM:{$avg:"$"+t+"PwmDrive"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},T=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"PWM",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor PWM [%]"}},tooltip:{formatter:function(t){return null!=t.PWM?{name:"PWM",value:t.PWM.toFixed(1)+" %"}:{}}}},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(P("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).then((function(){fetch((0,d.HQ)(),(0,d.wY)(P("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).then((function(){t.setState({data:[].concat((0,r.Z)(t.state.left),(0,r.Z)(t.state.right))}),clearInterval(t.timer)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),f.Z.plot),{},{data:this.state.data}))}}]),n}(s.Component),_=function(t){return JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Motor",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},leftRotateRate:1,rightRotateRate:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",rrate:{$avg:"$"+t+"RotateRate"}}},{$sort:{_id:-1}},{$limit:100},{$addFields:{side:t}}]})},M=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"rrate",seriesField:"side",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Motor rotation rate [rad/s]"}},tooltip:{formatter:function(t){return null!=t.rrate?{name:"Rotation rate",value:t.rrate.toFixed(1)+" rad/s"}:{}}}},i.state={data:[],right:[],left:[],ticks:-1},i}return(0,a.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,d.HQ)(),(0,d.wY)(_("left"))).then((function(t){return t.json()})).then((function(e){t.setState({left:e})})).then((function(){fetch((0,d.HQ)(),(0,d.wY)(_("right"))).then((function(t){return t.json()})).then((function(e){t.setState({right:e})})).then((function(){t.setState({data:[].concat((0,r.Z)(t.state.left),(0,r.Z)(t.state.right))}),clearInterval(t.timer)})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,m.jsx)(u.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),f.Z.plot),{},{data:this.state.data}))}}]),n}(s.Component),S={SimplePlot:[{plot:(0,m.jsx)(p,{}),title:"Motors currents by time",label:"Current by time",key:"motors-current-time-are"},{plot:(0,m.jsx)(C,{}),title:"Motors actual states",label:"Bullets",key:"motors-motors--bullet"},{plot:(0,m.jsx)(T,{}),title:"Motors PWM by time",label:"PWM by time",key:"motors-PWM-time-are"},{plot:(0,m.jsx)(M,{}),title:"Motors rotation rate by time",label:"Rotation rate by time",key:"motors-rrate-time-are"}],LargePlot:[],BigPlot:[]}},75079:function(t,e,n){n.d(e,{Z:function(){return Z}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),l=n(29388),c=n(47313),s=n(90722),u=n(8515),d=n(44090),f=n(46417),m=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Position_AMCL",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},pose:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",pose:{$avg:"$pose.pose.orientation.yaw"}}},{$sort:{_id:-1}},{$limit:100}]}),h=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"pose",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Robot pose [rad]"}},tooltip:{formatter:function(t){return null!=t.pose?{name:"Orietation",value:t.pose.toFixed(1)+" rad"}:{}}}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(m)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(s.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),p=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Position_Odometry",pipeline:[{$project:{dateTime:{$dateTrunc:{date:"$dateTime",unit:"minute"}},pose:1}},{$densify:{field:"dateTime",range:{step:1,unit:"minute",bounds:"full"}}},{$group:{_id:"$dateTime",pose:{$avg:"$pose.pose.orientation.yaw"}}},{$sort:{_id:-1}},{$limit:100}]}),g=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList(),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.refreshList()}),5e3)},i.config={xField:"_id",yField:"pose",xAxis:{tickCount:5,type:"time",mask:"DD/MMM/YY HH:mm",title:{text:"Time"}},yAxis:{tickCount:10,title:{text:"Robot pose [rad]"}},tooltip:{formatter:function(t){return null!=t.pose?{name:"Orietation",value:t.pose.toFixed(1)+" rad"}:{}}}},i.state={data:[],ticks:-1},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(p)).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).then((function(){clearInterval(t.timer)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return(0,f.jsx)(s.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),d.Z.plot),{},{data:this.state.data}))}}]),n}(c.Component),Z={SimplePlot:[{plot:(0,f.jsx)(h,{}),title:"AMCL yaw by time",label:"AMCL yaw by time",key:"AMCL-yaw-time-are"},{plot:(0,f.jsx)(g,{}),title:"Odometry yaw by time",label:"Odometry yaw by time",key:"odometry-yaw-time-are"}],LargePlot:[],BigPlot:[]}},1296:function(t,e,n){n.r(e),n.d(e,{default:function(){return T}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),l=n(29388),c=n(47313),s=n(32063),u=n(8515),d=n(79298),f=n(68756),m=n(97849),h=n(93433),p=n(57689),g=n(59615),Z=n(62163),y=n(70301),v=n(15577),$=n(46845),x=n(75079),k=n(58594),b={SimplePlot:[].concat((0,h.Z)(p.Z.SimplePlot),(0,h.Z)(g.Z.SimplePlot),(0,h.Z)(Z.Z.SimplePlot),(0,h.Z)(y.Z.SimplePlot),(0,h.Z)(v.Z.SimplePlot),(0,h.Z)($.Z.SimplePlot),(0,h.Z)(x.Z.SimplePlot),(0,h.Z)(k.Z.SimplePlot)),LargePlot:[].concat((0,h.Z)(p.Z.LargePlot),(0,h.Z)(g.Z.LargePlot),(0,h.Z)(Z.Z.LargePlot),(0,h.Z)(y.Z.LargePlot),(0,h.Z)(v.Z.LargePlot),(0,h.Z)($.Z.LargePlot),(0,h.Z)(x.Z.LargePlot),(0,h.Z)(k.Z.LargePlot)),BigPlot:[].concat((0,h.Z)(p.Z.BigPlot),(0,h.Z)(g.Z.BigPlot),(0,h.Z)(Z.Z.BigPlot),(0,h.Z)(y.Z.BigPlot),(0,h.Z)(v.Z.BigPlot),(0,h.Z)($.Z.BigPlot),(0,h.Z)(x.Z.BigPlot),(0,h.Z)(k.Z.BigPlot))},j={typography:{title:{align:"center",variant:"h5",color:"textSecondary"},subtitle:{align:"center",variant:"h6",color:"textSecondary"}},stack:{spacing:0,direction:"column",alignItems:"center",xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0},column:{header:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:7,xl:7,spacing:0},map:{justifyContent:"center",alignItems:"stretch",direction:"column",xs:12,sm:12,md:12,lg:5,xl:5,spacing:0},graphs:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:6,lg:6,xl:6,spacing:0},subheader:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:12,xl:12,spacing:0}}}},C=n(46417),P=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_dashboard",collection:"config",pipeline:[{$match:{user:"default"}},{$limit:1}]}),T=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).componentDidMount=function(){i.refreshList()},i.state={data:{},graphs:{0:[{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"00"}),coord:"00",type:"simple"},{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"01"}),coord:"01",type:"simple"},{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"02"}),coord:"02",type:"simple"}],1:[{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"10"}),coord:"10",type:"simple"},{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"11"}),coord:"11",type:"simple"},{key:"",graph:(0,C.jsx)(d.Z,{graph:null,title:null,position:"12"}),coord:"12",type:"simple"}],2:[{key:"",graph:(0,C.jsx)(f.Z,{graph:null,title:null,position:"20"}),coord:"20",type:"large"},{key:"",graph:(0,C.jsx)(m.Z,{graph:null,title:null,position:"21"}),coord:"21",type:"big"}]}},i}return(0,o.Z)(n,[{key:"refreshList",value:function(){var t=this;fetch((0,u.HQ)(),(0,u.wY)(P)).then((function(t){return t.json()})).then((function(e){t.setState({data:e[0].dashboardLayout}),t.generate(e[0].dashboardLayout)})).catch((function(t){console.log(t)}))}},{key:"generate",value:function(t){for(var e=this,n=[],i=function(){var i=[];e.state.graphs[r].forEach((function(e){var n=e,r=b.SimplePlot.find((function(n){return n.key==t[e.coord].graph})),o=b.LargePlot.find((function(n){return n.key==t[e.coord].graph})),a=b.BigPlot.find((function(n){return n.key==t[e.coord].graph}));switch(t[e.coord].type){case"simple":n.graph=(0,C.jsx)(d.Z,{graph:r.plot,title:r.title,position:e.coord,name:t[e.coord].graph});break;case"large":n.graph=(0,C.jsx)(f.Z,{graph:o.plot,title:o.title,position:e.coord});break;case"big":n.graph=(0,C.jsx)(m.Z,{graph:a.plot,title:a.title,position:e.coord})}i.push(n)})),n.push(i)},r=0;r<3;r++)i();this.setState({graphs:n}),this.forceUpdate()}},{key:"render",value:function(){return(0,C.jsxs)(s.Z,(0,i.Z)((0,i.Z)({container:!0},j.grid.main),{},{children:[(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({container:!0},j.grid.column.header),{},{children:(0,C.jsxs)(s.Z,(0,i.Z)((0,i.Z)({container:!0},j.grid.column.subheader),{},{children:[(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({item:!0},j.grid.column.graphs),{},{children:this.state.graphs[0].map((function(t){return t.graph}))})),(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({item:!0},j.grid.column.graphs),{},{children:this.state.graphs[1].map((function(t){return t.graph}))}))]}))})),(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({container:!0},j.grid.column.map),{},{children:(0,C.jsx)(s.Z,(0,i.Z)((0,i.Z)({item:!0},j.grid.column.subheader),{},{children:this.state.graphs[2].map((function(t){return t.graph}))}))}))]}))}}]),n}(c.Component)},8436:function(t,e,n){n.d(e,{Z:function(){return r}});var i=n(47313);function r(t,e){return i.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}}}]);