"use strict";(self.webpackChunkcedri_ugv_dashboard=self.webpackChunkcedri_ugv_dashboard||[]).push([[679],{5391:function(e,t){t.Z={typography:{align:"left",variant:"h3",color:"textSecondary",xs:12,sm:12,md:12,lg:12,xl:12},stack:{spacing:2,xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:0}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:0,ml:0,mb:0,gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:6,xl:6,spacing:0}}}},44090:function(e,t,n){var i=n(63509),s={bullet:{simple:{measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},height:50,width:300,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},animation:!1},dual:{measureField:"measures",rangeField:"ranges",targetField:"value",xField:"title",size:{range:30,measure:0,target:30},height:178,width:90,xAxis:{line:null},yAxis:!1,label:{measure:!1,target:!0},layout:"vertical",animation:!1},stack:{direction:"row",divider:(0,n(46417).jsx)(i.Z,{orientation:"vertical",flexItem:!0}),justifyContent:"space-evenly",alignItems:"center",spacing:0}},plot:{smooth:!0,animation:!1,style:{width:"100%",height:200}},typography:{title:{align:"center",variant:"h5",color:"textSecondary"},subtitle:{align:"center",variant:"h5",color:"textSecondary"}},stack:{direction:"column",alignItems:"center",justifyContent:"space-evenly",spacing:1,sx:{mt:1,mr:1,ml:1,mb:1}},maincard:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1},height:"100%",content:!1},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},map:{style:{width:"100%",height:450}},statusIcon:{popup:{icon:{sx:{width:35,height:35}},typography:{primary:{align:"left",variant:"h5",color:"textPrimary"},secondary:{align:"left",variant:"body1",color:"textSecondary"}},popover:{title:"Log",trigger:"click"}},badge:{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},size:"lg"},avatar:{sx:{bgcolor:"transparent"}},icon:{main:{color:"gray",sx:{height:107,width:67}},badge:{sx:{width:37,height:37}}},container:{direction:"row",justifyContent:"center",alignItems:"center",height:"100%"},item:{xs:12,sm:6,md:4,lg:2,xl:2,sx:{height:198}}}};t.Z=s},66679:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var i=n(1413),s=n(11556),a=n(15671),r=n(43144),o=n(60136),d=n(29388),c=n(47313),l=n(16157),u=n(62463),h=n(42669),g=n(80169),m=n(48664),p=n(97077),f=n(8515),x=n(46417),Z=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Nodes",pipeline:[{$project:{_id:0}},{$sort:{dateTime:-1}},{$limit:1e3},{$unwind:{path:"$nodes",preserveNullAndEmptyArrays:!1}}]}),y=[{title:"Time",dataIndex:"dateTime",key:"dateTime",sorter:{compare:function(e,t){return e.dateTime-t.dateTime},multiple:1},defaultSortOrder:"descend"},{title:"Node",dataIndex:["nodes","node"],key:"node"},{title:"Publishers",dataIndex:["nodes","pubs"],key:"pubs",render:function(e){return(0,x.jsx)("span",{children:e.map((function(e){return(0,x.jsx)(m.Z,{color:"geekblue",children:e.topic},e.topic)}))})}},{title:"Subscribers",dataIndex:["nodes","subs"],key:"subs",render:function(e){return(0,x.jsx)("span",{children:e.map((function(e){return(0,x.jsx)(m.Z,{color:"yellow",children:e.topic},e.topic)}))})}},{title:"Services",dataIndex:["nodes","serv"],key:"serv",render:function(e){return(0,x.jsx)("span",{children:e.map((function(e){return(0,x.jsx)(m.Z,{color:"green",children:e},e)}))})}}],v=function(e){(0,o.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).componentDidMount=function(){i.refreshList()},i.state={data:[],ticks:-1},i}return(0,r.Z)(n,[{key:"refreshList",value:function(){var e=this;fetch((0,f.H)(),(0,f.w)(Z)).then((function(e){return e.json()})).then((function(t){e.setState({data:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return(0,x.jsx)(p.Z,{columns:y,dataSource:this.state.data,pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleTableChange,sx:this.props.sx})}}]),n}(c.Component),$=n(40040),b=function(e){(0,o.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,x.jsx)(g.Z,{sx:$.Z,content:!1,children:(0,x.jsx)(l.Z,{sx:{p:3,pb:0},children:(0,x.jsxs)(u.Z,{spacing:2,children:[(0,x.jsx)(h.Z,{variant:"h3",color:"textSecondary",children:"Diagnostics data"}),(0,x.jsx)(v,{})]})})})}}]),n}(c.Component),j=n(82937),k=n(56448),C=n(46567),S=n(44090),w=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Nodes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$nodes",preserveNullAndEmptyArrays:!1}},{$unwind:{path:"$nodes.serv",preserveNullAndEmptyArrays:!1}},{$group:{_id:"$nodes.node",title:{$first:"$nodes.node"},items:{$first:{text:"$nodes.conn.Pid"}}}},{$project:{_id:0,id:"$_id",value:{title:"$title",items:"$items"}}}]}),I=JSON.stringify({dataSource:"CeDRI",database:"CeDRI_UGV_datalake",collection:"Nodes",pipeline:[{$sort:{dateTime:-1}},{$limit:1},{$unwind:{path:"$nodes",preserveNullAndEmptyArrays:!1}},{$unwind:{path:"$nodes.conn.Connections",preserveNullAndEmptyArrays:!1}},{$project:{_id:0,target:{$cond:[{$eq:["$nodes.conn.Connections.direction","outbound "]},"$nodes.conn.Connections.to","$nodes.node"]},source:{$cond:[{$eq:["$nodes.conn.Connections.direction","outbound "]},"$nodes.node","$nodes.conn.Connections.to"]},value:"$nodes.conn.Connections.topic"}},{$match:{$expr:{$and:[{$ne:["$target","$source"]}]},target:{$nin:["/rosout"]},source:{$nin:["/rosout"]}}},{$sort:{source:1,target:1}}]}),N=function(e){(0,o.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).componentDidMount=function(){i.refreshNodes(),i.refreshEdges(),i.setState({data:{edges:i.state.edges,nodes:i.state.nodes}}),i.timer()},i.componentWillUnmount=function(){clearInterval(i.timer)},i.timer=function(){setInterval((function(){i.canUpdate()}),1e3)},i.config={autoFit:!0,fitCenter:!0,animate:!1,nodeCfg:{type:"ellipse",size:[140,35],items:{padding:6,containerStyle:{fill:"#fff"},style:function(e,t,n){return{icon:{width:12,height:12},value:{fill:"#118980"},text:{fill:"#aaa"}}[n]}},nodeStateStyles:{hover:{stroke:"#1890ff",lineWidth:2}},title:{containerStyle:{fill:"transparent"},style:{fill:"#000",fontSize:12}},style:{fill:"#cdcdcd",stroke:"#2e2f33",radius:[2,2,2,2]},anchorPoints:[[0,.5],[1,.5],[.5,0],[.5,1]]},edgeCfg:{type:"quadratic",endArrow:{fill:"#007acc",strokeOpacity:.45},label:{style:{fill:"#2e2f33",fontSize:12,fillOpacity:1}},style:{stroke:"#007acc",lineWidth:2,strokeOpacity:.5},edgeStateStyles:{hover:{lineWidth:2,strokeOpacity:1}}},behaviors:["drag-canvas","zoom-canvas","drag-node"]},i.state={data:{edges:[{}],nodes:[{}]},edges:[],nodes:[],ticks:-1},i}return(0,r.Z)(n,[{key:"canUpdate",value:function(){this.state.ticks<=0||this.state.data=={edges:[{}],nodes:[{}]}?(this.setState({ticks:10}),this.refreshNodes(),this.refreshEdges(),this.setState({data:{edges:this.state.edges,nodes:this.state.nodes}})):JSON.parse(window.localStorage.getItem("fromLocal"))}},{key:"refreshNodes",value:function(){var e=this;fetch((0,f.H)(),(0,f.w)(w)).then((function(e){return e.json()})).then((function(t){e.setState({nodes:t})})).catch((function(e){console.log(e)}))}},{key:"refreshEdges",value:function(){var e=this;fetch((0,f.H)(),(0,f.w)(I)).then((function(e){return e.json()})).then((function(t){e.setState({edges:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return(0,x.jsx)(g.Z,(0,i.Z)((0,i.Z)({},S.Z.maincard),{},{children:(0,x.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},S.Z.stack),{},{children:[(0,x.jsx)(h.Z,(0,i.Z)((0,i.Z)({},S.Z.typography.title),{},{children:"Nodes map"})),(0,x.jsx)(C.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},this.config),S.Z.map),{},{data:this.state.data}))]}))}))}}]),n}(c.Component),A=n(5391),_=function(e){(0,o.Z)(n,e);var t=(0,d.Z)(n);function n(e){var s;return(0,a.Z)(this,n),(s=t.call(this,e)).hadleChange=function(e,t){s.setState({page:t}),s.componentDidMount()},s.componentDidMount=function(){s.graphs()},s.graphs=function(){if(1===s.state.page)return(0,x.jsx)(j.ZP,(0,i.Z)((0,i.Z)({container:!0},A.Z.grid.main),{},{children:(0,x.jsx)(j.ZP,(0,i.Z)((0,i.Z)({item:!0},A.Z.grid.item),{},{children:(0,x.jsx)(N,{})}))}))},s.state={page:1},s}return(0,r.Z)(n,[{key:"render",value:function(){return(0,x.jsx)(g.Z,(0,i.Z)((0,i.Z)({},A.Z.box),{},{children:(0,x.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},A.Z.stack),{},{children:[(0,x.jsx)(h.Z,(0,i.Z)((0,i.Z)({},A.Z.typography),{},{children:"Node plots"})),this.graphs(),(0,x.jsx)(k.Z,{count:1,defaultPage:1,siblingCount:0,page:this.state.page,onChange:this.hadleChange})]}))}))}}]),n}(c.Component),D=n(88461),O=function(){return(0,x.jsxs)(s.Z,(0,i.Z)((0,i.Z)({container:!0},D.Z.grid.main),{},{children:[(0,x.jsx)(s.Z,(0,i.Z)((0,i.Z)({item:!0},D.Z.grid.item),{},{children:(0,x.jsx)(_,{})})),(0,x.jsx)(s.Z,(0,i.Z)((0,i.Z)({item:!0},D.Z.grid.item),{},{children:(0,x.jsx)(b,{})}))]}))}},88461:function(e,t){t.Z={stack:{spacing:0,direction:"column",alignItems:"center",xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1}},box:{xs:1,sm:1,md:1,lg:1,xl:1,sx:{mt:1,mr:1,ml:1,mb:1,display:"grid",gridAutoRows:"100%",gap:1},height:"100%"},grid:{main:{direction:"row",justifyContent:"center",alignItems:"stretch",spacing:2},item:{justifyContent:"center",alignItems:"stretch",xs:12,sm:12,md:12,lg:12,xl:12,spacing:0,sx:{mt:0,mr:1,ml:1,mb:0}}}}},40040:function(e,t){t.Z={width:1,height:1,minHeight:1,maxHeight:1,minWidth:1,maxWidth:1,mt:1,gap:2}}}]);